{{- /* 本 partial 用于给 .markdown-body 添加样式，
     * site.Params.colorScheme 指定颜色主题 (默认是 gruvbox-light-soft)，
     * inlineStyle 指定 style 是内联还是外联，
     * replaceCSSVar 指定是否将 css variables 替换
     */
-}}

{{- $base := resources.Get "css/markdown-body-base.css" -}}
{{- $colorSchemeName := index site.Params "colorScheme" | default "gruvbox-light-soft" -}}
{{- $colorScheme := resources.Get (printf "css/color-scheme/%s.css" $colorSchemeName) -}}
{{- $tex2svg := resources.Get "css/tex2svg.css" -}}
{{- $css := slice $base $colorScheme $tex2svg | resources.Concat "css/markdown-body.css" -}}
{{- if .replaceCSSVar -}}
  {{ $css = $css | resources.PostCSS (dict "use" "postcss-css-variables") }}
{{- end -}}
{{ $css = $css | resources.Minify }}
{{- if .inlineStyle -}}
<style>
{{ $css.Content | safeCSS }}
</style>
{{- else -}}
<link rel="stylesheet" href="{{ $css.RelPermalink }}"></link>
{{- end -}}
